@using Microsoft.AspNetCore.Identity
@using BallerScout.Entities
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@inject BallerScout.Service.ServiceInterfaces.IPlayerHistoryService PlayerHistoryService
@inject BallerScout.Service.ServiceInterfaces.ISeasonService SeasonService
@inject BallerScout.Service.ServiceInterfaces.IGameService GameService

@model BallerScout.Models.UserExperienceModel

<h1>Player history</h1>
<div>
    <div>
        @{
            var games = Model.UserGames;
            var transfers = Model.UserTransfers;
            var seasons = Model.UserSeasons;
        }
        <hr />

        @if (games != null)
        {
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th>Season Year</th>
                        <th>Club</th>
                        <th>Minutes Played</th>
                        <th>Position</th>
                        <th>Versus Club</th>
                        <th>Goals Scored</th>
                        <th>Assists</th>
                        <th>Yellow Cards</th>
                        <th>Red Cards</th>
                    </tr>
                </thead>

                @foreach (var game in games)
                {
                    <tr>
                        <td>@game.DatePlayedString</td>
                        <td>@game.Club</td>
                        <td>@game.PlayedMinutes</td>
                        <td>@game.PositionPlayed</td>
                        <td>@game.VersusClub</td>
                        <td>@game.GoalsScored</td>
                        <td>@game.Assists</td>
                        <td>@game.YellowCards</td>
                        <td>@game.RedCards</td>
                    </tr>
                }
            </table>
        }
        <hr />

        @if (seasons != null)
        {
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th>Season Year</th>
                        <th>Club</th>
                        <th>Games Played</th>
                        <th>Goals Scored</th>
                        <th>Assists</th>
                        <th>Yellow Cards</th>
                        <th>Red Cards</th>
                    </tr>
                </thead>

                @foreach (var season in seasons)
                {
                    <tr>
                        <td>@season.SeasonYearString</td>
                        <td>@season.Club</td>
                        <td>@season.GamesPlayed</td>
                        <td>@season.GoalsScored</td>
                        <td>@season.Assists</td>
                        <td>@season.YellowCards</td>
                        <td>@season.RedCards</td>
                    </tr>
                }
            </table>
        }
        <hr />

        @if (transfers != null)
        {
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th>Date</th>
                        <th>From</th>
                        <th></th>
                        <th>To</th>
                        <th>Transfer Type</th>
                    </tr>
                </thead>

                @foreach (var transfer in transfers)
                {
                    <tr>
                        <td>@transfer.TransferDateString</td>
                        <td>@transfer.FromClub</td>
                        <td><i class="fa fa-arrow-right"></i></td>
                        <td>@transfer.ToClub</td>
                        <td>@transfer.ContractType</td>
                    </tr>
                }
            </table>
        }
    </div>
    <a asp-action="UserProfile" asp-route-id="@Model.UserId" class="btn btn-outline-info">Back To Player Profile</a>
</div>